## 계층형 아키텍처



💡계층형 아키텍처의 구조

\- `사용자와 상호작용`을 하는 ****웹 계층****

\- 엔티티의 `영속성`을 처리하는 ****영속성 계층****

![clean-architecture-1-5](/Users/gimminchae/Desktop/clean-architecture-1-5.png)

****웹 계층은 도메인 계층에 의존하고, 도메인 계층은 영속성 계층에 의존하게 된다.****

\- 영속성 계층을 토대로 서비스가 만들어져 `데이터베이스에 의존적`이다.



→ 데이터베이스를 중심으로 설계가 된다.



\## 계층형 아키텍처의 단점



\1. ****도메인 로직을 웹 계층에서 구현하는 일이 빈번해질 경우****, 애플리케이션 전반적으로 `핵심 도메인 로직이 분산`된다는 단점이 생긴다.



→****도메인 로직을 작성한 코드가 어느곳에 있는지 찾기 어려워진다.****



\1. ****웹 계층 테스트를 할 때****, 도메인 계층 뿐만 아니라 영속성 계층도 모킹해야해서 ****단위 테스트 복잡도가 올라가게 된다.****



\- 모킹이란



 외부 서비스에 의존하지 않고 `독립적으로 실행이 가능한 단위 테스트를 작성`하기 위해서 사용되는 테스팅 기법



\## 사용이유



💡



 ****수직적 계층화****와 ****기능 기반 패키징****의 장점만을 취한 아키텍처이다.



\- 기술과 비즈니스 로직 분리

\- 각 도메인 별로 비즈니스로직 분리



****기술 스택****을 바꾸거나 ****코드들간의 의존성(결합도)****이 너무 높은 상황에서 ***\***`**코드간의 응집성`****을 높이고 ***\***`**비즈니스 로직 재활용`****을 위해 사용 할 수 있다.



\## 제약조건



\> ****비즈니스 도메인은 프레임워크, 라이브러리같은 기술스택에 상관없이 재사용이 될 수 있어야 한다. → 도메인은 어디에도 종속되지 않아야 응즈니스 로직이 기술에 분리될 수 있다.****



도메인 영역



\- ****인프라 영역으로는 접근이 가능****하지만, 반대로는 불가하게 구성

\- ****포트, 어댑터****를 통해서만 도메인 영역에서 인프라 영역으로 접근하게 해야함



→ ****느슨한 결합 유지****



\## 구현방법



![image-20221225205131493](/Users/gimminchae/Library/Application Support/typora-user-images/image-20221225205131493.png)



![image-20221225205146697](/Users/gimminchae/Library/Application Support/typora-user-images/image-20221225205146697.png)